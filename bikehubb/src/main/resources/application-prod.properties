# ==============================================================================
# CONFIGURAÇÃO DE PRODUÇÃO
# ==============================================================================
# Usa banco PostgreSQL Supabase para produção

# Configuração do banco de dados Supabase - Transaction Pooler
# URL com usuário e parâmetros de conexão conforme fornecido pelo Supabase
spring.datasource.url=jdbc:postgresql://aws-0-sa-east-1.pooler.supabase.com:6543/postgres?user=postgres.krlhnihkslmmihprkwqm&sslmode=require&preparedStatementCacheQueries=0&rewriteBatchedInserts=true&connectTimeout=30&socketTimeout=60&tcpKeepAlive=true
spring.datasource.username=postgres.krlhnihkslmmihprkwqm
# SUBSTITUA [YOUR-PASSWORD] pela senha real do seu projeto Supabase
spring.datasource.password=dfyEf5Io8SQTyT2k
spring.datasource.driver-class-name=org.postgresql.Driver

# Hibernate/JPA - Produção
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.open-in-view=false

# Pool de conexão otimizado para Transaction Pooler
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=3
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000
spring.datasource.hikari.connection-test-query=SELECT 1

# Logs reduzidos para produção
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN
logging.level.root=INFO

# JWT Secret Key (mesma do desenvolvimento para compatibilidade)
jwt.secret=Gl7w8l5EO0z8lfnxssXKTeObnJGSUnxD3rBhmDzcs62V9O8CXoj/pLBAjP646Tq+Uo2WaOAgCn+8oyEE0q17Jw==

# Configurações de CORS para produção
management.endpoints.web.cors.allowed-origins=https://*.netlify.app
management.endpoints.web.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
management.endpoints.web.cors.allowed-headers=*
