# ==============================================================================
# CONFIGURAÇÃO DE DESENVOLVIMENTO 
# ==============================================================================

# Configuração do banco de dados H2 (em memória para desenvolvimento)
# spring.datasource.url=jdbc:h2:mem:bikehubbdev;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
# spring.datasource.username=sa
# spring.datasource.password=
# spring.datasource.driver-class-name=org.h2.Driver
# Configuração do banco de dados Supabase - Transaction Pooler
# URL com usuário e parâmetros de conexão conforme fornecido pelo Supabase
spring.datasource.url=jdbc:postgresql://aws-0-sa-east-1.pooler.supabase.com:6543/postgres?user=postgres.krlhnihkslmmihprkwqm&sslmode=require&preparedStatementCacheQueries=0&rewriteBatchedInserts=true&connectTimeout=30&socketTimeout=60&tcpKeepAlive=true
spring.datasource.username=postgres.krlhnihkslmmihprkwqm
# SUBSTITUA [YOUR-PASSWORD] pela senha real do seu projeto Supabase
spring.datasource.password=aGGm8jdWwP1S8f6W
spring.datasource.driver-class-name=org.postgresql.Driver

# Hibernate/JPA - Desenvolvimento com H2
# spring.jpa.hibernate.ddl-auto=create-drop
# spring.jpa.open-in-view=true
# spring.jpa.show-sql=true
# spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.open-in-view=false

# H2 Console (para debug - acessível em http://localhost:8080/h2-console)
# spring.h2.console.enabled=true
# spring.h2.console.path=/h2-console

# Logs detalhados para debug em desenvolvimento
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.level.org.springframework.transaction=DEBUG
logging.level.org.springframework.orm=DEBUG

# Pool de conexão para desenvolvimento
# spring.datasource.hikari.maximum-pool-size=5
# spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=3
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000
spring.datasource.hikari.connection-test-query=SELECT 1

# Configurações de CORS para desenvolvimento
management.endpoints.web.cors.allowed-origins=https://*.netlify.app
management.endpoints.web.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
management.endpoints.web.cors.allowed-headers=*